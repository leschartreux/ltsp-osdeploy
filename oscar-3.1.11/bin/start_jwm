#!/bin/sh



## Copyright (c) 2003-2013 Tissoires Jean-François & Benjamin,  jftissoires@gmail.com
## Outil Système Complet d'Assistance Réseau: OSCAR
## Rapide de Sauvegarde aux Ordinateurs et Systèmes: RapideSOS
## Ce programme est sous Licence Publique Générale GNU publiée par la Free Software Foundation.

PATH="/usr/share/oscar/bin:$PATH"

# pour JWM :
    #	grep -v "StartupCommand"  /root/.jwmrc | grep -v "/JWM" > /tmp/temp_start_jwm1
    #	cp -f /tmp/temp_start_jwm1 /root/.jwmrc
    #	echo "`cat /tmp/temp_start_jwm`" >> /root/.jwmrc
    #	rm -f /tmp/temp_start_jwm
    #	echo "</JWM>" >> /root/.jwmrc
    #	rm -f /tmp/temp_start_jwm1
grep -v "StartupCommand" /root/.jwmrc > /tmp/jwmrc_temp
cp -f /tmp/jwmrc_temp /root/.jwmrc
rm -f /tmp/jwmrc_temp

# pour xfce :
runme sp_arreter_NetworkManager

grep -v "commande_demarrage_winmgr.sh" /root/.xinitrc > /tmp/xinitrc_temp
cp -f /tmp/xinitrc_temp /root/.xinitrc
rm -f /tmp/xinitrc_temp
perl -pi -e 's/exec \/root\/winmgr.sh/`cat \/tmp\/commande_demarrage_winmgr.sh` > \/dev\/null 2>&1 &
exec \/root\/winmgr.sh/g;' /root/.xinitrc
if ( test -e /root/.config/xfce4/panel/panels.xml )
then
	perl -pi -e s'/\"screen-position\" value=\"10\"/\"screen-position\" value=\"1\"/g;' /root/.config/xfce4/panel/panels.xml
fi

grep -v "ColorBackground" /root/.config/Terminal/terminalrc | grep -v "ColorCursor" | grep -v "ColorForeground" > /tmp/temp_terminalrc
cp -f /tmp/temp_terminalrc /root/.config/Terminal/terminalrc
rm -f /tmp/temp_terminalrc
echo "ColorBackground=BLACK
ColorCursor=WHITE
ColorForeGround=WHITE" >> /root/.config/Terminal/terminalrc