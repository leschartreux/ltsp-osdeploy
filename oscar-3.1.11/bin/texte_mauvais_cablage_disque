#!/bin/bash

## Copyright (c) 2003-2013 Tissoires Jean-François & Benjamin,  jftissoires@gmail.com
## Outil Système Complet d'Assistance Réseau: OSCAR
## Rapide de Sauvegarde aux Ordinateurs et Systèmes: RapideSOS
## Ce programme est sous Licence Publique Générale GNU publiée par la Free Software Foundation.

PATH="/usr/share/oscar/bin:$PATH"
if ( test -e /usr/share/oscar/usr/choix_langue )
then
	choix_langue=`cat /usr/share/oscar/usr/choix_langue`
else
	echo "fr" > /usr/share/oscar/usr/choix_langue
	choix_langue=fr
	traduction
fi
chemin_langue=/usr/share/oscar/usr/langue/$choix_langue

#
#-----------------------------------------------------------------------------------------------------
main() # boucle principale
{
	# Arrêt de la procédure client Erreur de cablage
	DIALOGRC="/etc/dialogmenu_bloque" dialog --colors \
	--backtitle "`cat /etc/banniere_oscar`" \
	--ok-label "`cat $chemin_langue/Quitter`" --cancel-label "`cat $chemin_langue/Forcer`" \
	--title " `cat $chemin_langue/menu_433` " \
	--menu "\n\Zb\Z1   `cat $chemin_langue/menu_434`\n\n" 10 67 0 \
	"" "" \
	"" "\Z2`cat /tmp/texte_disque` `cat $chemin_langue/menu_435`" \
	"" "\Z2`cat $chemin_langue/menu_436` " \
	"" "" \
	"" "\Zb\Z1`cat $chemin_langue/menu_437` " \
	"" "\Zb\Z1`cat $chemin_langue/menu_438` \Zb\Z7Ctrl_c\Zn. " \
	"" "" \
	"" "\Z2`cat $chemin_langue/menu_439`. " \
	"" ""
      case $? in
	    0)	 rm -f /tmp/texte_disque
	    	echo "" > /tmp/sortir
	    	exit
	    	;;
	    1) rm -f /tmp/texte_disque
	    	exit
	    	;;
	    255) rm -f /tmp/texte_disque
	    	echo "" > /tmp/sortir
	    	exit
	    	;;
	esac
}
#-----------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------
#                   BOUCLE PRINCIPALE
#-----------------------------------------------------------------------------------------------------
#-----------------------------------------------------------------------------------------------------
# commandes externes
case "$1" in
    type_ide)
	valeur_type=`cat /tmp/partition_type_scsi_ide`
	if [ "$valeur_type" = "ide" ]
	then
	    valeur_type=IDE
	else
	    valeur_type=SATA
	fi
	echo "`cat $chemin_langue/menu_440` $valeur_type\Zn\Z2" > /tmp/texte_disque
	main
        exit 0
        ;;
esac
echo "`cat $chemin_langue/menu_441`" > /tmp/texte_disque
main
