#!/bin/bash

## Copyright (c) 2003-2013 Tissoires Jean-François & Benjamin,  jftissoires@gmail.com
## Outil Système Complet d'Assistance Réseau: OSCAR
## Rapide de Sauvegarde aux Ordinateurs et Systèmes: RapideSOS
## Ce programme est sous Licence Publique Générale GNU publiée par la Free Software Foundation.


# change le mot pour clavier us grub2

# fr=francais
# us=anglais
# voir repertoire /isolinux/maps


#----------------------------------------------------------------------------------------------------
convertir_clavier_grub2()	# configure pour grub
{

case $choix_clavier in
	fr|azerty)
	case $lettre_en_cours in
		"&") lettre_en_cours=1 ;;
		"é") lettre_en_cours=2 ;;
		"\"") lettre_en_cours=3 ;;
		"'") lettre_en_cours=4 ;;
		"(") lettre_en_cours=5 ;;
		"-") lettre_en_cours=6 ;;
		"è") lettre_en_cours=7 ;;
		"_") lettre_en_cours=8 ;;
		"ç") lettre_en_cours=9 ;;
		"à") lettre_en_cours=0 ;;
		")") lettre_en_cours="-" ;;
		"=") lettre_en_cours="=" ;;
		"+") lettre_en_cours="+" ;;
		1) lettre_en_cours="!" ;;
		2) lettre_en_cours="@" ;;
		3) lettre_en_cours="#" ;;
		4) lettre_en_cours="$" ;;
		5) lettre_en_cours="%" ;;
		6) lettre_en_cours="^" ;;
		7) lettre_en_cours="&" ;;
		8) lettre_en_cours="*" ;;
		9) lettre_en_cours="(" ;;
		0) lettre_en_cours=")" ;;
		Q) lettre_en_cours=A ;;
		W) lettre_en_cours=Z ;;
		E) lettre_en_cours=E ;;
		R) lettre_en_cours=R ;;
		T) lettre_en_cours=T ;;
		Y) lettre_en_cours=Y ;;
		U) lettre_en_cours=U ;;
		I) lettre_en_cours=I ;;
		O) lettre_en_cours=O ;;
		P) lettre_en_cours=P ;;
		"^") lettre_en_cours="[" ;;
		"$") lettre_en_cours="]" ;;
		"}") lettre_en_cours="}" ;;
		"{") lettre_en_cours="{" ;;
		q) lettre_en_cours=a ;;
		w) lettre_en_cours=z ;;
		e) lettre_en_cours=e ;;
		r) lettre_en_cours=r ;;
		t) lettre_en_cours=t ;;
		y) lettre_en_cours=y ;;
		u) lettre_en_cours=u ;;
		i) lettre_en_cours=i ;;
		o) lettre_en_cours=o ;;
		p) lettre_en_cours=p ;;
		"°") lettre_en_cours="_" ;;
		"ù") lettre_en_cours="'" ;;
		"%") lettre_en_cours="\"" ;;
		"*") lettre_en_cours="\\" ;;
		"µ") lettre_en_cours="|" ;;
		A) lettre_en_cours=Q ;;
		S) lettre_en_cours=S ;;
		D) lettre_en_cours=D ;;
		F) lettre_en_cours=F ;;
		G) lettre_en_cours=G ;;
		H) lettre_en_cours=H ;;
		J) lettre_en_cours=J ;;
		K) lettre_en_cours=K ;;
		L) lettre_en_cours=L ;;
		M) lettre_en_cours=";" ;;
		a) lettre_en_cours=q ;;
		s) lettre_en_cours=s ;;
		d) lettre_en_cours=d ;;
		f) lettre_en_cours=f ;;
		g) lettre_en_cours=g ;;
		h) lettre_en_cours=h ;;
		j) lettre_en_cours=j ;;
		k) lettre_en_cours=k ;;
		l) lettre_en_cours=l ;;
		Z) lettre_en_cours=W ;;
		X) lettre_en_cours=X ;;
		C) lettre_en_cours=C ;;
		V) lettre_en_cours=V ;;
		B) lettre_en_cours=B ;;
		N) lettre_en_cours=N ;;
		M) lettre_en_cours=":" ;;
		"<") lettre_en_cours="\\" ;;
		">") lettre_en_cours="|" ;;
		"?") lettre_en_cours="M" ;;
		z) lettre_en_cours=w ;;
		x) lettre_en_cours=x ;;
		c) lettre_en_cours=c ;;
		v) lettre_en_cours=v ;;
		b) lettre_en_cours=b ;;
		n) lettre_en_cours=n ;;
		m) lettre_en_cours=";" ;;
		",") lettre_en_cours="m" ;;
		".") lettre_en_cours="<" ;;
		":") lettre_en_cours="." ;;
		"/") lettre_en_cours=">" ;;
		"!") lettre_en_cours="/" ;;
		"§") lettre_en_cours="?" ;;
		";") lettre_en_cours="," ;;
	esac ;;
	be)
	case $lettre_en_cours in
		"~") lettre_en_cours="~" ;;
		"!") lettre_en_cours=1 ;;
		"@") lettre_en_cours=2 ;;
		"#") lettre_en_cours=3 ;;
		"$") lettre_en_cours=4 ;;
		"%") lettre_en_cours=5 ;;
		"^") lettre_en_cours=6 ;;
		"&") lettre_en_cours=7 ;;
		"*") lettre_en_cours=8 ;;
		"(") lettre_en_cours=9 ;;
		")") lettre_en_cours=0 ;;
		"_") lettre_en_cours="_" ;;
		"+") lettre_en_cours="_" ;;
		  1) lettre_en_cours="&" ;;
		  2) lettre_en_cours="@" ;;
		  3) lettre_en_cours="\"" ;;
		  4) lettre_en_cours="'" ;;
		  5) lettre_en_cours="(" ;;
		  6) lettre_en_cours="-" ;;
		  7) lettre_en_cours="`" ;;
		  8) lettre_en_cours="_" ;;
		  9) lettre_en_cours="^" ;;
		  0) lettre_en_cours="@" ;;
		"-") lettre_en_cours=")" ;;
		"=") lettre_en_cours="-" ;;
		A)  lettre_en_cours=Q ;;
		Z)  lettre_en_cours=W ;;
		E)  lettre_en_cours=E ;;
		R)  lettre_en_cours=R ;;
		T)  lettre_en_cours=T ;;
		Y)  lettre_en_cours=Y ;;
		U)  lettre_en_cours=U ;;
		I)  lettre_en_cours=I ;;
		O)  lettre_en_cours=O ;;
		P)  lettre_en_cours=P ;;
		"{")  lettre_en_cours="{" ;;
		"}")  lettre_en_cours="}" ;;
		"|")  lettre_en_cours="|" ;;
		q)  lettre_en_cours=a ;;
		w)  lettre_en_cours=z ;;
		e)  lettre_en_cours=e ;;
		r)  lettre_en_cours=r ;;
		t)  lettre_en_cours=t ;;
		y)  lettre_en_cours=y ;;
		u)  lettre_en_cours=u ;;
		i)  lettre_en_cours=i ;;
		o)  lettre_en_cours=o ;;
		p)  lettre_en_cours=p ;;
		"[")  lettre_en_cours="[" ;;
		"]")  lettre_en_cours="]" ;;
		"\\")  lettre_en_cours="\\" ;;
		A)  lettre_en_cours=Q ;;
		S)  lettre_en_cours=S ;;
		D)  lettre_en_cours=D ;;
		F)  lettre_en_cours=F ;;
		G)  lettre_en_cours=G ;;
		H)  lettre_en_cours=H ;;
		J)  lettre_en_cours=J ;;
		K)  lettre_en_cours=K ;;
		L)  lettre_en_cours=L ;;
		":") lettre_en_cours=M ;;
		"\"") lettre_en_cours="%" ;;
		a)  lettre_en_cours=q ;;
		s)  lettre_en_cours=s ;;
		d)  lettre_en_cours=d ;;
		f)  lettre_en_cours=f ;;
		g)  lettre_en_cours=g ;;
		h)  lettre_en_cours=h ;;
		j)  lettre_en_cours=j ;;
		k)  lettre_en_cours=k ;;
		l)  lettre_en_cours=l ;;
		";")  lettre_en_cours=m ;;
		"'")  lettre_en_cours="'" ;;
		Z)  lettre_en_cours=W ;;
		X)  lettre_en_cours=X ;;
		C)  lettre_en_cours=C ;;
		V)  lettre_en_cours=V ;;
		B)  lettre_en_cours=B ;;
		N)  lettre_en_cours=N ;;
		M)  lettre_en_cours="?" ;;
		"<") lettre_en_cours="." ;;
		">") lettre_en_cours="/" ;;
		"+") lettre_en_cours="?" ;;
		z)  lettre_en_cours=w ;;
		x)  lettre_en_cours=x ;;
		c)  lettre_en_cours=c ;;
		v)  lettre_en_cours=v ;;
		b)  lettre_en_cours=b ;;
		n)  lettre_en_cours=n ;;
		m)  lettre_en_cours="," ;;
		",") lettre_en_cours=";" ;;
		".") lettre_en_cours=":" ;;
		"/") lettre_en_cours="=" ;;
	esac ;;
	fr_CH|fr_ch)
	case $lettre_en_cours in
		"~") lettre_en_cours="~" ;;
		"!") lettre_en_cours="+" ;;
		"@") lettre_en_cours="\"" ;;
		"#") lettre_en_cours="*" ;;
		"$") lettre_en_cours="$" ;;
		"%") lettre_en_cours="%" ;;
		"^") lettre_en_cours="&" ;;
		"&") lettre_en_cours="/" ;;
		"*") lettre_en_cours="(" ;;
		"(") lettre_en_cours=")" ;;
		")") lettre_en_cours="=" ;;
		"_") lettre_en_cours="?" ;;
		"+") lettre_en_cours="`" ;;
		
		1)  lettre_en_cours=1 ;;
		2)  lettre_en_cours=2 ;;
		3)  lettre_en_cours=3 ;;
		4)  lettre_en_cours=4 ;;
		5)  lettre_en_cours=5 ;;
		6)  lettre_en_cours=6 ;;
		7)  lettre_en_cours=7 ;;
		8)  lettre_en_cours=8 ;;
		9)  lettre_en_cours=9 ;;
		0)  lettre_en_cours=0 ;;
		"-") lettre_en_cours="\\" ;;
		"=") lettre_en_cours="^" ;;
		
		Q)  lettre_en_cours=Q ;;
		W)  lettre_en_cours=W ;;
		E)  lettre_en_cours=E ;;
		R)  lettre_en_cours=R ;;
		T)  lettre_en_cours=T ;;
		Y)  lettre_en_cours=Z ;;
		U)  lettre_en_cours=U ;;
		I)  lettre_en_cours=I ;;
		O)  lettre_en_cours=O ;;
		P)  lettre_en_cours=P ;;
		"{")  lettre_en_cours="{" ;;
		"}")  lettre_en_cours="}" ;;
		"|")  lettre_en_cours="|" ;;
		
		q)  lettre_en_cours=q ;;
		w)  lettre_en_cours=w ;;
		e)  lettre_en_cours=e ;;
		r)  lettre_en_cours=r ;;
		t)  lettre_en_cours=t ;;
		y)  lettre_en_cours=z ;;
		u)  lettre_en_cours=u ;;
		i)  lettre_en_cours=i ;;
		o)  lettre_en_cours=o ;;
		p)  lettre_en_cours=p ;;
		"[")  lettre_en_cours="[" ;;
		"]")  lettre_en_cours="]" ;;
		"\\")  lettre_en_cours="\\" ;;
		
		A)  lettre_en_cours=A ;;
		S)  lettre_en_cours=S ;;
		D)  lettre_en_cours=D ;;
		F)  lettre_en_cours=F ;;
		G)  lettre_en_cours=G ;;
		H)  lettre_en_cours=H ;;
		J)  lettre_en_cours=J ;;
		K)  lettre_en_cours=K ;;
		L)  lettre_en_cours=L ;;
		":")  lettre_en_cours=":" ;;
		"\"") lettre_en_cours="\"" ;;
		
		a)  lettre_en_cours=a ;;
		s)  lettre_en_cours=s ;;
		d)  lettre_en_cours=d ;;
		f)  lettre_en_cours=f ;;
		g)  lettre_en_cours=g ;;
		h)  lettre_en_cours=h ;;
		j)  lettre_en_cours=j ;;
		k)  lettre_en_cours=k ;;
		l)  lettre_en_cours=l ;;
		";")  lettre_en_cours=";" ;;
		"\\")  lettre_en_cours="\\" ;;
		
		Z)  lettre_en_cours=Y ;;
		X)  lettre_en_cours=X ;;
		C)  lettre_en_cours=C ;;
		V)  lettre_en_cours=V ;;
		B)  lettre_en_cours=B ;;
		N)  lettre_en_cours=N ;;
		M)  lettre_en_cours=M ;;
		"<") lettre_en_cours=";" ;;
		">") lettre_en_cours=":" ;;
		"?") lettre_en_cours="-" ;;
		
		z)  lettre_en_cours=z ;;
		x)  lettre_en_cours=x ;;
		c)  lettre_en_cours=c ;;
		v)  lettre_en_cours=v ;;
		b)  lettre_en_cours=b ;;
		n)  lettre_en_cours=n ;;
		m)  lettre_en_cours=m ;;
		",")  lettre_en_cours="," ;;
		".")  lettre_en_cours="." ;;
		"/")  lettre_en_cours="-" ;;
	esac ;;
	es)
	case $lettre_en_cours in
		"~")  lettre_en_cours="\\" ;;
		"!")  lettre_en_cours="!" ;;
		"@")  lettre_en_cours="\"" ;;
		"#")  lettre_en_cours="." ;;
		"$")  lettre_en_cours="$" ;;
		"%")  lettre_en_cours="%" ;;
		"^")  lettre_en_cours="&" ;;
		"&")  lettre_en_cours="/" ;;
		"*")  lettre_en_cours="(" ;;
		"(")  lettre_en_cours=")" ;;
		")")  lettre_en_cours="=" ;;
		"_")  lettre_en_cours="?" ;;
		"+")  lettre_en_cours="+" ;;
		
		1)  lettre_en_cours=1 ;;
		2)  lettre_en_cours=2 ;;
		3)  lettre_en_cours=3 ;;
		4)  lettre_en_cours=4 ;;
		5)  lettre_en_cours=5 ;;
		6)  lettre_en_cours=6 ;;
		7)  lettre_en_cours=7 ;;
		8)  lettre_en_cours=8 ;;
		9)  lettre_en_cours=9 ;;
		0)  lettre_en_cours=0 ;;
		"-") lettre_en_cours="\\" ;;
		"=") lettre_en_cours="|" ;;
		
		Q)  lettre_en_cours=Q ;;
		W)  lettre_en_cours=W ;;
		E)  lettre_en_cours=E ;;
		R)  lettre_en_cours=R ;;
		T)  lettre_en_cours=T ;;
		Y)  lettre_en_cours=Y ;;
		U)  lettre_en_cours=U ;;
		I)  lettre_en_cours=I ;;
		O)  lettre_en_cours=O ;;
		P)  lettre_en_cours=P ;;
		"{") lettre_en_cours="^" ;;
		"}") lettre_en_cours="*" ;;
		"|") lettre_en_cours="|" ;;
		
		q)  lettre_en_cours=q ;;
		w)  lettre_en_cours=w ;;
		e)  lettre_en_cours=e ;;
		r)  lettre_en_cours=r ;;
		t)  lettre_en_cours=t ;;
		y)  lettre_en_cours=y ;;
		u)  lettre_en_cours=u ;;
		i)  lettre_en_cours=i ;;
		o)  lettre_en_cours=o ;;
		p)  lettre_en_cours=p ;;
		"[")  lettre_en_cours="[" ;;
		"]")  lettre_en_cours="]" ;;
		"\\")  lettre_en_cours="\\" ;;
		
		A)  lettre_en_cours=A ;;
		S)  lettre_en_cours=S ;;
		D)  lettre_en_cours=D ;;
		F)  lettre_en_cours=F ;;
		G)  lettre_en_cours=G ;;
		H)  lettre_en_cours=H ;;
		J)  lettre_en_cours=J ;;
		K)  lettre_en_cours=K ;;
		L)  lettre_en_cours=L ;;
		":")  lettre_en_cours=":" ;;
		"\"")  lettre_en_cours="\"" ;;
		
		a)  lettre_en_cours=a ;;
		s)  lettre_en_cours=s ;;
		d)  lettre_en_cours=d ;;
		f)  lettre_en_cours=f ;;
		g)  lettre_en_cours=g ;;
		h)  lettre_en_cours=h ;;
		j)  lettre_en_cours=j ;;
		k)  lettre_en_cours=k ;;
		l)  lettre_en_cours=l ;;
		";") lettre_en_cours="{" ;;
		"\\") lettre_en_cours="}" ;;
		
		Z)  lettre_en_cours=Z ;;
		X)  lettre_en_cours=X ;;
		C)  lettre_en_cours=C ;;
		V)  lettre_en_cours=V ;;
		B)  lettre_en_cours=B ;;
		N)  lettre_en_cours=N ;;
		M)  lettre_en_cours=M ;;
		"<") lettre_en_cours=";" ;;
		">") lettre_en_cours=":" ;;
		"?") lettre_en_cours="-" ;;
		
		z)  lettre_en_cours=z ;;
		x)  lettre_en_cours=x ;;
		c)  lettre_en_cours=c ;;
		v)  lettre_en_cours=v ;;
		b)  lettre_en_cours=b ;;
		n)  lettre_en_cours=n ;;
		m)  lettre_en_cours=m ;;
		",") lettre_en_cours="," ;;
		".") lettre_en_cours="." ;;
		"/") lettre_en_cours="-" ;;
	esac ;;
	de)
	case $lettre_en_cours in
		"~") lettre_en_cours="^" ;;
		"!") lettre_en_cours="!" ;;
		"@") lettre_en_cours="\"" ;;
		"#") lettre_en_cours="*" ;;
		"$") lettre_en_cours="$" ;;
		"%") lettre_en_cours="%" ;;
		"^") lettre_en_cours="&" ;;
		"&") lettre_en_cours="/" ;;
		"*") lettre_en_cours="(" ;;
		"(") lettre_en_cours=")" ;;
		")") lettre_en_cours="=" ;;
		"_") lettre_en_cours="?" ;;
		"+") lettre_en_cours="\\" ;;
		
		1)  lettre_en_cours=1 ;;
		2)  lettre_en_cours=2 ;;
		3)  lettre_en_cours=3 ;;
		4)  lettre_en_cours=4 ;;
		5)  lettre_en_cours=5 ;;
		6)  lettre_en_cours=6 ;;
		7)  lettre_en_cours=7 ;;
		8)  lettre_en_cours=8 ;;
		9)  lettre_en_cours=9 ;;
		0)  lettre_en_cours=0 ;;
		"-") lettre_en_cours=")" ;;
		"=") lettre_en_cours="\\" ;;
		
		Q)  lettre_en_cours=Q ;;
		W)  lettre_en_cours=W ;;
		E)  lettre_en_cours=E ;;
		R)  lettre_en_cours=R ;;
		T)  lettre_en_cours=T ;;
		Y)  lettre_en_cours=Z ;;
		U)  lettre_en_cours=U ;;
		I)  lettre_en_cours=I ;;
		O)  lettre_en_cours=O ;;
		P)  lettre_en_cours=P ;;
		"{") lettre_en_cours="{" ;;
		"}") lettre_en_cours="*" ;;
		"|") lettre_en_cours="|" ;;
		
		q)  lettre_en_cours=q ;;
		w)  lettre_en_cours=w ;;
		e)  lettre_en_cours=e ;;
		r)  lettre_en_cours=r ;;
		t)  lettre_en_cours=t ;;
		y)  lettre_en_cours=z ;;
		u)  lettre_en_cours=u ;;
		i)  lettre_en_cours=i ;;
		o)  lettre_en_cours=o ;;
		p)  lettre_en_cours=p ;;
		"[") lettre_en_cours="[" ;;
		"]") lettre_en_cours="+" ;;
		"\\") lettre_en_cours="\\" ;;
		
		A)  lettre_en_cours=A ;;
		S)  lettre_en_cours=S ;;
		D)  lettre_en_cours=D ;;
		F)  lettre_en_cours=F ;;
		G)  lettre_en_cours=G ;;
		H)  lettre_en_cours=H ;;
		J)  lettre_en_cours=J ;;
		K)  lettre_en_cours=K ;;
		L)  lettre_en_cours=L ;;
		":")  lettre_en_cours=":" ;;
		"\"")  lettre_en_cours="\"" ;;
		
		a)  lettre_en_cours=a ;;
		s)  lettre_en_cours=s ;;
		d)  lettre_en_cours=d ;;
		f)  lettre_en_cours=f ;;
		g)  lettre_en_cours=g ;;
		h)  lettre_en_cours=h ;;
		j)  lettre_en_cours=j ;;
		k)  lettre_en_cours=k ;;
		l)  lettre_en_cours=l ;;
		";")  lettre_en_cours=";" ;;
		"'")  lettre_en_cours="'" ;;
		
		Z)  lettre_en_cours=Y ;;
		X)  lettre_en_cours=X ;;
		C)  lettre_en_cours=C ;;
		V)  lettre_en_cours=V ;;
		B)  lettre_en_cours=B ;;
		N)  lettre_en_cours=N ;;
		M)  lettre_en_cours=M ;;
		"<") lettre_en_cours=";" ;;
		">") lettre_en_cours=":" ;;
		"?") lettre_en_cours="_" ;;
		
		z)  lettre_en_cours=y ;;
		x)  lettre_en_cours=x ;;
		c)  lettre_en_cours=c ;;
		v)  lettre_en_cours=v ;;
		b)  lettre_en_cours=b ;;
		n)  lettre_en_cours=n ;;
		m)  lettre_en_cours=m ;;
		",") lettre_en_cours="," ;;
		".") lettre_en_cours="." ;;
		"/") lettre_en_cours="-" ;;
	esac ;;
esac
cd /root
}
#----------------------------------------------------------------------------------------------------
#----------------------------------------------------------------------------------------------------
main()
{
if ( test -e /usr/share/oscar/usr/choix_clavier )
then
	choix_clavier=`cat /usr/share/oscar/usr/choix_clavier`
else
	echo "fr" > /usr/share/oscar/usr/choix_clavier
	choix_clavier=fr
fi
if ! ( test -e /usr/share/oscar/usr/clavier )
then
	mkdir /usr/share/oscar/usr/clavier
fi
}
#---------------------------------------------------------------------------------------------------
lettre_suivante()
{
if [ "$mot_direct" != "" ]
then
	lettre_en_cours=`expr substr $mot_direct 1 1`
	if [ "$lettre_en_cours" != "" ]
	then
		mot_direct=`expr substr $mot_direct 2 50`
		convertir_clavier_grub2
		mot_sortie="$mot_sortie""$lettre_en_cours"
		lettre_suivante
		return
	else
		echo "$mot_sortie" > /tmp/mot_passe
	fi
else
	echo "$mot_sortie" > /tmp/mot_passe
fi
}
#----------------------------------------------------------------------------------------------------
PATH="/usr/share/oscar/bin:$PATH"
/usr/share/oscar/usr/version_theme_oscar
main
perl -pi -e 's/ //g;' /tmp/mot_passe
if ! [ "$choix_clavier" = "us" ]
then
	mot_direct=`cat /tmp/mot_passe`
	mot_sortie=
	lettre_suivante
fi
#---------------------------------------------------------------------------------------------------
