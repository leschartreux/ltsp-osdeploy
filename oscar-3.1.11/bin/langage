#!/bin/sh



## Copyright (c) 2003-2013 Tissoires Jean-François & Benjamin,  jftissoires@gmail.com
## Outil Système Complet d'Assistance Réseau: OSCAR
## Rapide de Sauvegarde aux Ordinateurs et Systèmes: RapideSOS
## Ce programme est sous Licence Publique Générale GNU publiée par la Free Software Foundation.


#----------------------------------------------------------------------------------------------------
boite_choix_langue()	
{
	# ajouter une ligne si nouvelle langue
	echo "français    french" > /tmp/liste_langue
	echo "anglais     english" >> /tmp/liste_langue
	echo "allemand    deutsch" >> /tmp/liste_langue
	echo "italien     italiano" >> /tmp/liste_langue
	
	awk 'BEGIN { FS=":" } { printf ("%0s\n","\""$1"\" \"\" \\")}' /tmp/liste_langue > /tmp/bozo
	rm -f /tmp/liste_langue
	
	# boite : Choix de la langue
	echo " `cat $chemin_langue/selection_18` " > /tmp/menu_titre
	echo "" > /tmp/menu_texte
	echo "`cat $chemin_langue/selection_19` \n\Zn\Z2(Select the language)\Zb\Z4 : " > /tmp/fichierquestion

	echo "9" > /tmp/hauteur
	echo "55" > /tmp/largeur
	echo "0" > /tmp/position
	runme boite_selection_bozo
	rm -f /tmp/hauteur
	rm -f /tmp/largeur
	rm -f /tmp/position
	rm -f /tmp/texte

	if ( test -e /tmp/sortir )
	then
		rm -f /tmp/tempfile
		rm -f /tmp/sortir
		exit
	fi
	cut -d" " -f1 /tmp/tempfile > /tmp/templangue
	langue_choisie=`cat /tmp/templangue`
	rm -f /tmp/tempfile
	rm -f /tmp/templangue
	
	# ajouter un cas si nouvelle langue
	case $langue_choisie in
		français)
			echo "fr" > /usr/share/oscar/usr/choix_langue
			;;
		italien)
			echo "it" > /usr/share/oscar/usr/choix_langue
			;;
		allemand)
			echo "de" > /usr/share/oscar/usr/choix_langue
			;;
		anglais)
			echo "us" > /usr/share/oscar/usr/choix_langue
			;;
	esac
}
#----------------------------------------------------------------------------------------------------
main()
{
boite_choix_langue
traduction
}
#----------------------------------------------------------------------------------------------------
#----------------------------------------------------------------------------------------------------
PATH="/usr/share/oscar/bin:$PATH"
/usr/share/oscar/usr/version_theme_oscar
if ( test -e /usr/share/oscar/usr/choix_langue )
then
	choix_langue=`cat /usr/share/oscar/usr/choix_langue`
else
	echo "fr" > /usr/share/oscar/usr/choix_langue
	choix_langue=fr
	traduction
fi
chemin_langue=/usr/share/oscar/usr/langue/$choix_langue


main
