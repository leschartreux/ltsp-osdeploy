#!/bin/sh


## Copyright (c) 2003-2013 Tissoires Jean-François & Benjamin, jftissoires@gmail.com
## Cdrom Outil Système Complet d'Assistance Réseau: OSCAR
## Ce programme est sous Licence Publique Générale GNU publiée par la Free Software Foundation.

# installe la nouvelle version OSCAR


#-----------------------------------------------------------------------------------------------------
changement_partition_sauvegarde() # changement de parttion de sauvegarde
{
partition_sauvegarde=`cat partition_de_sauvegarde`
rm -f partition_de_sauvegarde
if ! ( test -e /mnt/$partition_sauvegarde/oscar )
then
mkdir /mnt/$partition_sauvegarde/oscar
fi
if ! ( test -e /mnt/$partition_sauvegarde/oscar/image.partimage.000 )
then
mv -f /mnt/$partition_sauvegarde/image.partimage.* /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/date_de_sauvegarde /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/date_oscar /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/fin_numero_poste_oscar.reg /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/oscar.bat  /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/oscar_modifstartup_nom.reg /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/partition_oscar /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/partition_sauvegardee /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/sauvegarde_* /mnt/$partition_sauvegarde/oscar/ 
mv -f /mnt/$partition_sauvegarde/table_partitions.* /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/taille_partition_* /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/disque_boot /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/var_poste /mnt/$partition_sauvegarde/oscar/
mv -f /mnt/$partition_sauvegarde/demarre_oscar /mnt/$partition_sauvegarde/oscar/
fi

if ! ( test -e /mnt/$partition_sauvegarde/oscar/var_poste )
then
mkdir /mnt/$partition_sauvegarde/oscar/var_poste
fi
if ( test -e /mnt/$partition_sauvegarde/salle_clients )
then
cp -f /mnt/$partition_sauvegarde/salle_clients /mnt/$partition_sauvegarde/oscar/var_poste/
fi
clear
## fin changement de partition de sauvegarde
}
#-----------------------------------------------------------------------------------------------------
#  Prog principal
#-----------------------------------------------------------------------------------------------------
#  commandes externes de procédures

PATH="/usr/share/oscar/bin:$PATH"


case "$1" in

    changement_partition_sauvegarde)
    	changement_partition_sauvegarde
	exit 0
	;;
 
esac ## fin de commandes externes

 
