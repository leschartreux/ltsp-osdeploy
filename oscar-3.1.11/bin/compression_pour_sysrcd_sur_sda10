#!/bin/sh


## Copyright (c) 2003-2013 Tissoires Jean-François & Benjamin, jftissoires@gmail.com
## Cdrom Outil Système Complet d'Assistance Réseau: OSCAR
## Ce programme est sous Licence Publique Générale GNU publiée par la Free Software Foundation.

PATH="/usr/share/oscar/bin:$PATH"

sdai=sda10
mkdir /mnt/$sdai
mount /dev/$sdai /mnt/$sdai



echo " Donner numero de la version OSCAR : "
read numero_oscar

echo "rien" > /mnt/$sdai/linux/cd_oscar_srcd/oscar/oscar-$numero_oscar/bin/fichier_a
echo "rien" > /mnt/$sdai/linux/cd_oscar_srcd/oscar/oscar-$numero_oscar/bin/fichier_s
echo "rien" > /mnt/$sdai/linux/cd_oscar_srcd/oscar/oscar-$numero_oscar/bin/fichier_t
chmod +x /mnt/$sdai/linux/cd_oscar_srcd/oscar/oscar-$numero_oscar/bin/*
cd /mnt/$sdai/linux/cd_oscar_srcd/oscar
rm -f oscar.tar.gz




if ( test -e /root/sysresccd-pkg.txt )	# démarrage cd sysrcd avec ou sans option cdcache ou démarrage ou pxe sur le poste si sysrcd
then    # pour sysrcd:
	tar -czf oscar.tar.gz */
else
	tar -czj f=oscar.tar.gz */
fi

cd /root

echo Compression faite.
echo Decompresse dans /mnt/$sdai/linux/decompresser_srcd et range OK ?
read p 
rm -fR /mnt/$sdai/linux/decompresser_srcd
mkdir /mnt/$sdai/linux/decompresser_srcd
cp -f /mnt/$sdai/linux/cd_oscar_srcd/oscar/oscar.tar.gz /mnt/$sdai/linux/decompresser_srcd
cd /mnt/$sdai/linux/decompresser_srcd

if ( test -e /root/sysresccd-pkg.txt )	# démarrage cd sysrcd avec ou sans option cdcache ou démarrage ou pxe sur le poste si sysrcd
then    # pour sysrcd:
	tar -xzvpf oscar.tar.gz
else
	tar -xvpj f=oscar.tar.gz
fi



cd /root
echo contenu de /mnt/$sdai/linux/decompresser_srcd/:
ls /mnt/$sdai/linux/decompresser_srcd/


